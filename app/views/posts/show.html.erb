<% content_for :meta_tags do %>
  <%= render MetaTagsComponent.new(meta_robots_index: @post.meta_robots_index,
                                   meta_robots_follow: @post.meta_robots_follow,
                                   meta_title: @post.meta_title,
                                   meta_description: @post.meta_description,
                                   meta_type: "Article",
                                   meta_image: (url_for(@post.main_image) if @post.main_image.attached?) ) %>
<% end %>

<article class="mt-20 grid gap-6 max-w-5xl mx-auto m-6 bg-white p-6">
  <h1 class="text-3xl"><%= @post.title %></h1>
  <h2 class="text-2xl"><%#= @post.sub_category.name %></h2>

  <nav class="bg-grey-light rounded font-sans w-full">
    <div class="flex text-grey-dark">
      <div><a href="#" class="font-bold">Home</a></div>
      <div><span class="mx-2">></span></div>
      <div><a href="#" class="font-bold">Library</a></div>
      <div><span class="mx-2">></span></div>
      <div>Data</div>
    </div>
  </nav>

  <div>
    <%= @post.excerpt %>
  </div>

  <% if @post.main_image.attached? %>
    <%= image_tag @post.main_image %>
  <% end %>

  <div class="flex space-x-2">
  <span
    class="
      text-xs
      px-2
      font-medium
      bg-gray-500 bg-opacity-10
      text-gray-800
      rounded
      py-0.5
    "
  >
    Badge
  </span>
    <span
      class="
      text-xs
      px-2
      font-medium
      bg-red-500 bg-opacity-10
      text-red-800
      rounded
      py-0.5
    "
    >
    Badge
  </span>

    <span
      class="
      text-xs
      px-2
      font-medium
      bg-yellow-500 bg-opacity-10
      text-yellow-800
      rounded
      py-0.5
    "
    >
    Badge
  </span>
    <span
      class="
      text-xs
      px-2
      font-medium
      bg-green-500 bg-opacity-10
      text-green-800
      rounded
      py-0.5
    "
    >
    Badge
  </span>

    <span
      class="
      text-xs
      px-2
      font-medium
      bg-blue-500 bg-opacity-10
      text-blue-800
      rounded
      py-0.5
    "
    >
    Badge
  </span>
    <span
      class="
      text-xs
      px-2
      font-medium
      bg-purple-500 bg-opacity-10
      text-purple-800
      rounded
      py-0.5
    "
    >
    Badge
  </span>
    <span
      class="
      text-xs
      px-2
      font-medium
      bg-indigo-500 bg-opacity-10
      text-indigo-800
      rounded
      py-0.5
    "
    >
    Badge
  </span>
    <span
      class="
      text-xs
      px-2
      font-medium
      bg-pink-500 bg-opacity-10
      text-pink-800
      rounded
      py-0.5
    "
    >
    Badge
  </span>
  </div>

  <div class="rich-text">
    <%= @post.body %>
  </div>

  <div class="grid md:grid-cols-2">
    <%= @post.comments_count %> <%= @post.comments_count <= 1 ? "commentaire" : "commentaires" %>
    <%= link_to "Laisser un commentaire", post_path(:anchor => "form"), class: 'link md:text-right' %>
  </div>


  <h3 class="text-xl">Rejoindre la discussion :</h3>
  <%= render CommentsComponent.new(post: @post) %>


  <div>
    <%= render "comments/form" %>
  </div>
</article>

